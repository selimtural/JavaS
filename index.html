<!DOCTYPE html>
<html lang="en-US">
    <head>
        <meta charset="UTF-8">
            <meta name="viewport" content="width=device-width">
                <link href="https://maeyler.github.io/JS/sss/inspector.css" 
                    rel="stylesheet" media="all">
                    <script src="https://maeyler.github.io/JS/sss/inspector.js"></script>
                    <script src="Database.js"></script>
                   
                    <title>Eloquent JavaScript </title>
    </head>
    
    <body>
        <p><b id=docName></b> &nbsp;
        <a href="https://maeyler.github.io/JS/sss/">Read me</a> &nbsp;
        <a href="https://maeyler.github.io/JS/sss/Turkish">Turkish</a>
        </p>
        
        <script>
            "use strict";
            var a, b, c, code;  //global variables
            function init() {
                let
                len = 123, name = "Circle", pi = Math.PI, 
                sqrt = Math.sqrt, power = Math.pow;
                a = [0, 11, "22", "abc"];
                c = {len, name, pi, sqrt, power};
    
                display(new CW4());
            }
        docName.innerText = "Inspector "+VERSION;
        try {
            inspect(document.body, init); //makes the table
            //inp.value = "new Number(c.pi)";
        } catch(e) {
            reportError(e);
        }
        </script>
        
        <p><input type=file multiple onChange='fileSelect(this)' />
        </p><p>
        <a href="https://maeyler.github.io/BLM305/exam/Quiz.html">Quiz solution</a> &emsp;
        <a href="https://maeyler.github.io/JS/hard/Fetch%20remote.html">Fetch remote</a>
        </p>
        <pre id=disp1></pre>
        <img id=disp2 />
        
    </body>
</html>"use strict";
const RDR2 = new FileReader();
RDR2.onload = function() { display(RDR2) };
function fileSelect(t) {
//target t is the file selection HTMLInputElement
let a = t.files; //display(t);
if (a.length == 0) return;
display(RDR2);
if (a.length == 1) {
let f = a[0]; display(f);
MENU.displayFile(f)
} else {
display(a);
let s = "";
for (let f of a)
s += f.name+" "+f.size+" bytes "+NL;
MENU.displayText(s)
}
}

class Async extends Menu {
constructor() {
super();
this.navigator = navigator;
this.clipboard = navigator.clipboard;
this.geolocation = navigator.geolocation;
this.reader = RDR2  //defined above
}
isTextFile(f) {
console.assert(f instanceof File);
return f.type.startsWith("text") || f.name.endsWith(".md")
|| f.name.endsWith(".js") || f.name.endsWith(".java");
}
displayFile(f) {
console.assert(f instanceof File); let M = this;
console.log(f.name+" "+f.size+" bytes "+f.type);
if (f.type.startsWith("image")) {
RDR2.onload = function(evt) {
M.displayImage(RDR2.result)
};
RDR2.readAsDataURL(f);
} else if (this.isTextFile(f)) {
RDR2.onload = function(evt) {
M.displayText(RDR2.result)
};
RDR2.readAsText(f);
} else {
this.displayText("Unknown")
}
}
displayText(txt) {
disp1.innerText = txt; disp2.src = "";
return disp1
}
displayImage(url) {
disp1.innerText = ""; disp2.src = url;
return disp2
}
}

